# üì∞ Telegram –†–∞—Å—Å—ã–ª–∫–∞ –ù–æ–≤–æ—Å—Ç–µ–π - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. üîî –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç `/start` ‚Üí **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞—Å—Å—ã–ª–∫—É**
- ChatId –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤

### 2. üì¢ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫
–î–≤–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

#### `subscribe-notifications`
```bash
POST /api/subscribe-notifications
{
  "chat_id": 123456789,
  "username": "username",
  "first_name": "–ò–≤–∞–Ω"
}
```

#### `send-broadcast`
```bash
POST /api/send-broadcast
{
  "broadcast_title": "üì∞ –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã",
  "message": "–î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç! üç¨\n\n–ó–∞–≥–ª—è–Ω–∏—Ç–µ –≤ –º–∞–≥–∞–∑–∏–Ω ‚Üí"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "ok": true,
  "message": "‚úÖ –†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞",
  "sent": 45,
  "failed": 2,
  "total": 47
}
```

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –ü—Ä–∏–º–µ—Ä 1: –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
```bash
curl -X POST http://localhost:5000/api/send-broadcast \
  -H "Content-Type: application/json" \
  -d '{
    "broadcast_title": "üéÅ –ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã",
    "message": "–î–æ–±–∞–≤–∏–ª–∏ —Å–≤–µ–∂—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –∫–æ –¥–Ω—é —Ä–æ–∂–¥–µ–Ω–∏—è! üéÇ\n\n–°–ø–µ—à–∏—Ç–µ, –ø–µ—Ä–≤—ã–µ 50 –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π –ø–æ–ª—É—á–∞—Ç —Å–∫–∏–¥–∫—É 20%"
  }'
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–∫—Ü–∏—è
```bash
curl -X POST http://localhost:5000/api/send-broadcast \
  -d '{
    "broadcast_title": "üî• –ß–µ—Ä–Ω–∞—è –ü—è—Ç–Ω–∏—Ü–∞",
    "message": "–°–∫–∏–¥–∫–∏ –¥–æ 50% –Ω–∞ –≤—Å–µ —Ç–æ–≤–∞—Ä—ã! üõçÔ∏è\n\n–û—Å—Ç–∞–ª–æ—Å—å 24 —á–∞—Å–∞"
  }'
```

### –ü—Ä–∏–º–µ—Ä 3: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ
```bash
curl -X POST http://localhost:5000/api/send-broadcast \
  -d '{
    "broadcast_title": "üì¶ –í–∞—à –∑–∞–∫–∞–∑",
    "message": "–í–∞—à –∑–∞–∫–∞–∑ –≥–æ—Ç–æ–≤ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ! –¢—Ä–µ–∫-–Ω–æ–º–µ—Ä: TRK12345"
  }'
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ `telegram_subscribers`:

```sql
CREATE TABLE telegram_subscribers (
  id SERIAL PRIMARY KEY,
  chat_id BIGINT UNIQUE NOT NULL,
  username VARCHAR,
  first_name VARCHAR,
  subscribed_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  is_active BOOLEAN DEFAULT true
);
```

---

## üéØ Flow —Ä–∞–±–æ—Ç—ã:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí /start –≤ –±–æ—Ç–µ
   ‚Üì
2. –ë–æ—Ç ‚Üí –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç chat_id –≤ –ë–î)
   ‚Üì
3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/send-broadcast
   ‚Üì
4. –ë–æ—Ç ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º
   ‚Üì
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Üê –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```

---

## ‚öôÔ∏è –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:

–ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —á–µ—Ä–µ–∑:
- **Cronjob** (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00)
- **Webhook** (–Ω–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞)
- **–ö–Ω–æ–ø–∫–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏** (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É)

