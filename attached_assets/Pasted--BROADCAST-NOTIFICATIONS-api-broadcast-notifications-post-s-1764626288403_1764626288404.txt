# ========== BROADCAST NOTIFICATIONS ==========
  /api/broadcast-notifications:
    post:
      summary: Telegram —Ä–∞—Å—Å—ã–ª–∫–∞ - –ø–æ–¥–ø–∏—Å–∫–∞ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
      description: Unified —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ broadcast —Ä–∞—Å—Å—ã–ª–æ–∫
      operationId: broadcastNotifications
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - action
              properties:
                action:
                  type: string
                  enum: [subscribe, send]
                  description: 'subscribe - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞, send - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É'
                  example: "send"
                chat_id:
                  type: number
                  description: Telegram chat ID (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è action=subscribe)
                  example: 123456789
                username:
                  type: string
                  description: Telegram username (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                first_name:
                  type: string
                  description: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                message:
                  type: string
                  description: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è action=send)
                  example: "–î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã!"
                broadcast_title:
                  type: string
                  description: –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–∞—Å—Å—ã–ª–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
                  example: "üéÅ –ù–æ–≤–∏–Ω–∫–∞"
      x-yc-apigateway-integration:
        type: cloud_functions
        function_id: d4efkrvud5o73t4cskgk
        service_account_id: aje47rf2630q59equess
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                  message:
                    type: string
                  sent:
                    type: number
                    description: –ö–æ–ª-–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è action=send)
                  failed:
                    type: number
                    description: –ö–æ–ª-–≤–æ –æ—à–∏–±–æ–∫ (–¥–ª—è action=send)
                  total:
                    type: number
                    description: –í—Å–µ–≥–æ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ (–¥–ª—è action=send)
        '400':
          description: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
        '500':
          description: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
    options:
      summary: CORS preflight
      x-yc-apigateway-integration:
        type: dummy
        http_code: 200
        http_headers:
          'Access-Control-Allow-Origin': '*'
          'Access-Control-Allow-Methods': 'POST, OPTIONS'
          'Access-Control-Allow-Headers': 'Content-Type, Authorization'
        content:
          application/json: '{}'
      responses:
        '200':
          description: OK
