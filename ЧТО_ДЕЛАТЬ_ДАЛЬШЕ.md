# üéØ –ß–¢–û –í–ê–ú –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨

## ‚úÖ –ß–¢–û –£–ñ–ï –ì–û–¢–û–í–û

–ê–≥–µ–Ω—Ç —Å–æ–∑–¥–∞–ª **–≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ Cloud Functions** –≤ –ø–∞–ø–∫–µ `yandex-functions/`:
- 17 –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- Helper —Ñ–∞–π–ª—ã (db-client.js, response-helper.js)
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é API Gateway
- –ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –¥–µ–ø–ª–æ—é

## üìã –í–ê–® –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–ê–ì 1: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Cloud Functions (1-2 —á–∞—Å–∞)

**–û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª:** `DEPLOY_CLOUD_FUNCTIONS.md`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Yandex Cloud Console ‚Üí Cloud Functions
2. –°–æ–∑–¥–∞—Ç—å –∫–∞–∂–¥—É—é –∏–∑ 17 —Ñ—É–Ω–∫—Ü–∏–π (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ —Ñ–∞–π–ª–µ)
3. –ó–∞–ø–∏—Å–∞—Ç—å Function ID –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü—É

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ—É–Ω–∫—Ü–∏–π:**
- üî¥ **–ö–†–ò–¢–ò–ß–ù–û:** validate-promo (–¥–ª—è checkout)
- üî¥ **–ö–†–ò–¢–ò–ß–ù–û:** update-product, delete-product, create-category, delete-category (–¥–ª—è –∞–¥–º–∏–Ω–∫–∏)
- üü° **–í–ê–ñ–ù–û:** get-reviews, create-review, delete-review
- üü¢ **–ú–û–ñ–ù–û –ü–û–ó–ñ–ï:** –æ—Å—Ç–∞–ª—å–Ω—ã–µ

### –®–ê–ì 2: –û–±–Ω–æ–≤–∏—Ç—å API Gateway (10 –º–∏–Ω—É—Ç)

**–§–∞–π–ª:** `API_GATEWAY_SPEC_FINAL.yaml`

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `API_GATEWAY_SPEC_FINAL.yaml`
2. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `<FUNCTION_ID_...>` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ ID –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ Yandex Cloud Console ‚Üí API Gateway
4. –í—ã–±—Ä–∞—Ç—å –≤–∞—à API Gateway
5. –ù–∞–∂–∞—Ç—å "–ò–∑–º–µ–Ω–∏—Ç—å"
6. –ó–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å YAML –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π
7. –ù–∞–∂–∞—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

### –®–ê–ì 3: –°–æ–æ–±—â–∏—Ç—å –∞–≥–µ–Ω—Ç—É –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

**–ö–æ–≥–¥–∞ –≤—Å—ë –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ:**

–ù–∞–ø–∏—à–∏—Ç–µ –∞–≥–µ–Ω—Ç—É: **"–§—É–Ω–∫—Ü–∏–∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω—ã, API Gateway –æ–±–Ω–æ–≤–ª–µ–Ω"**

–ê–≥–µ–Ω—Ç:
- –û–±–Ω–æ–≤–∏—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö API
- –£–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ yandex-*.ts —Å–µ—Ä–≤–∏—Å—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É

---

## üí° –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### Environment Variables
–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```
YDB_ENDPOINT=<–≤–∞—à_endpoint>
YDB_ACCESS_KEY_ID=<–≤–∞—à_–∫–ª—é—á>
YDB_SECRET_KEY=<–≤–∞—à_—Å–µ–∫—Ä–µ—Ç>
```

### –°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç –∂–µ `service_account_id` —á—Ç–æ –∏ —É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π:
```
aje47rf2630q59equess
```

### –ú–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ
–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å –≤—Å–µ 17 —Ñ—É–Ω–∫—Ü–∏–π —Å—Ä–∞–∑—É:

**–§–ê–ó–ê 1** (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏):
- update-product
- delete-product
- create-category
- delete-category

**–§–ê–ó–ê 2** (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è checkout):
- validate-promo

**–§–ê–ó–ê 3** (–æ—Å—Ç–∞–ª—å–Ω–æ–µ):
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üÜò –ù–£–ñ–ù–ê –ü–û–ú–û–©–¨?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DEPLOY_CLOUD_FUNCTIONS.md` - —Ç–∞–º –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Cloud Functions Console
3. –°–ø—Ä–æ—Å–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞ - –æ–Ω –ø–æ–º–æ–∂–µ—Ç!

---

## ‚è±Ô∏è –ü–†–ò–ú–ï–†–ù–û–ï –í–†–ï–ú–Ø

- –î–µ–ø–ª–æ–π 1 —Ñ—É–Ω–∫—Ü–∏–∏: ~5 –º–∏–Ω—É—Ç
- –í—Å–µ–≥–æ 17 —Ñ—É–Ω–∫—Ü–∏–π: ~1.5 —á–∞—Å–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API Gateway: 10 –º–∏–Ω—É—Ç
- –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å –∞–≥–µ–Ω—Ç–æ–º: 30 –º–∏–Ω—É—Ç

**–ò–¢–û–ì–û: ~2-2.5 —á–∞—Å–∞**

---

## üéØ –ü–û–°–õ–ï –ó–ê–í–ï–†–®–ï–ù–ò–Ø

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∞–≥–µ–Ω—Ç –æ–±–Ω–æ–≤–∏—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ —É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã:

‚úÖ –ê–¥–º–∏–Ω–∫–∞ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ –û—Ç–∑—ã–≤—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ checkout
‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–ª–∏—á–∏–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
‚úÖ –í–°–Å –ë–ï–ó–û–ü–ê–°–ù–û (—Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤–∏–¥–Ω—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ!)

---

**–ì–û–¢–û–í–´ –ù–ê–ß–ê–¢–¨?** –û—Ç–∫—Ä–æ–π—Ç–µ `DEPLOY_CLOUD_FUNCTIONS.md` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º! üöÄ
